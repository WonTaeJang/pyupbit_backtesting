<!DOCTYPE html>

<head>
    <title>Cryptocurrency BackTesting</title>
    
    
    <script type="text/javascript" src="{{ url_for('static', filename='js/backtest.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/backtesting-chart.js') }}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">
        <h2>변동성 돌파전략 Back Testing (UPbit용)</h2>

        <div class="well well-sm">
            <label>투자 금액:</label>
            <input type="text" id="money" onkeyup="inputNumberFormat(this)">
            <label>원</label>
        </div>
        
        <div class="well">
            <div class="form-group">
                <label>KRW-Coin: </label>
                
                <input type="text" class="form-control" list="list" id="coin_text" value="KRW-"/>
                <datalist id="list" name="name" hidden="hidden">
                    {% for tricker in trickers %}
                    <option value="{{tricker}}"></option>
                    {% endfor %}
                </select>
            </div>
    
            <div class="form-group">
                <label>봉 단위: </label>
                <select id='interval' class="form-control" name="unit">
                    <optgroup label="minute">
                        <option value="minute1">1분</option>
                        <option value="minute3">3분</option>
                        <option value="minute5">5분</option>
                        <option value="minute10">10분</option>
                        <option value="minute30">30분</option>
                        <option value="minute60">60분</option>
                        <option value="minute240">240분</option>
                    </optgroup>
                    <optgroup label="day">
                        <option selected value="day">일</option>
                    </optgroup>
                    <optgroup label="week">
                        <option value="week">주</option>
                    </optgroup>
                    <optgroup label="month">
                        <option value="month">월</option>
                    </optgroup>
                </select>
            </div>

            <div class="row">
              <div class="col-sm-6">
                <input class="form-control" type='date' id="date_start" value="2021-09-01">
                <select id='coin_range' class="form-control" style="display:none"> 
                    <option selected value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                    <option value="150">150</option>
                    <option value="200">200</option>
                </select>
            </div>

              <div class="col-sm-6">
                <input class="form-control" type='date' id="date_end">
              </div>
              <p></p>
            </div>

            <div class="form-group">
                <label>K: </label>
                <input class="form-control" id="setValue_K" type="text" value="0.5">
                
            </div>
        </div>
        

        <div class="well">
            <input class="btn btn-success" type="button" id='btn1' value="backtest start" />
        </div>

        <div id="result_div" style="visibility:hidden" class="well">
            <h2>Result</h2>
            
            <div>
                <p>기간: <label id="result_lb_1"></label>~<label id="result_lb_6"></label></p>
                <p>시작금액: <label id="result_lb_2"></label>원</p>
                <p>MDD: <label id="result_lb_3"></label>%</p>
                <p>누적 수익률: <label id="result_lb_4"></label>%</p>
                <p>손익평가: <label id="result_lb_5"></label>원</p>
                <p>원화거래 업비트 수수료 0.05%를 고려한 결과입니다.</p>
            </div>
            
            <canvas id="hprChart"></canvas>
            <canvas id="mddChart"></canvas>
        </div>
    </div>

</body>
<script>
    settings();
</script>